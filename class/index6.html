<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>JS Learn. Day 6. DOM events. G5.</title>
		<script src="js/utils.js"> </script>
		<link href="css/base.css" rel="stylesheet"/>	
	</head>
	<body>
	    <style></style>
	
		<h3>JS Learn. Day 6. DOM events.</h3>
		
		<!-- v.1-1 -->
		<button onclick="log('++ btn1-1', new Date())">Press1-1 </button>
		
		<!-- v.1-2 -->
		<button onclick="handler1()" oncontextmenu="handler2()">Press1-2 </button>
		
		<!-- v.2 -->
		<button id="btn2">Press2 </button>
		
		<!-- v.3 -->
		<button id="btn3">Press3 </button>
		
		<!-- event object -->
		<button id="btn4">Press4 </button>
		
		<div id="outer">
			<div id="inner"></div>
		</div>
		<div id="coords"></div>
		<div id="points"><ol></ol></div>
		<label for="login">Login:</label> <input id="login"/> <br/>
		
		
		
		 		
		<script>
			document.body.oncontextmenu = (e)=>e.preventDefault();
		
			function handler1() {log('++ btn1-2 left click', new Date());}
			const handler2 =()=> log('++ btn1-2 right click', new Date());
			function handler3() { log('+++ btn2 clicked', new Date()); }
			
			function handler4()
			{
				log('+++ btn3 extra event handler', new Date());
			}
			const handler5=(e)=>{
				if ( (e.altKey && e.shiftKey) || (e.ctrlKey && e.shiftKey))
					log('+++ btn4 clicked with Alt+Shift or Ctr+Shift', new Date());  }
			
			//v.2.
			const btn2 = document.getElementById('btn2');
			btn2.onclick = ()=>log('++ btn2 clicked', new Date());
			btn2.onclick = handler3;
			
			//v.3.
			const btn3 = document.getElementById('btn3');
			
			btn3.addEventListener('click', ()=>log('+++ btn3 clicked', new Date()));
			btn3.addEventListener('click', handler4);
			// btn3.removeEventListener('click',handler4)
		
		    // event Object
			const btn4 = document.getElementById('btn4');
			btn4.onclick=(e)=>log(e);
			btn4.addEventListener('click', handler5);
			
		    // event propogation
			const inner = document.getElementById('inner');
			const outer= document.getElementById('outer');
			
			inner.onclick=(e)=>{
				const r = Math.floor(255*Math.random());
				const g = Math.floor(255*Math.random());
				const b = Math.floor(255*Math.random());
				const color = rgb(r,g,b);
				log(r,g,b,color);
				inner.setAttribute('style',`background-color:${color}`);
				
				
				log(e,"++ inner clicked");}
			outer.onclick=(e)=>log(e,"++ outer clicked");
			
			// dynamic menubar
			let menubarTOP = document.createElement('div');
			menubarTOP.className = 'menu';
			menubarTOP.innerHTML = 'TOP menu';
			document.body.insertAdjacentElement('afterBegin',menubarTOP);
			
			menubarTOP.onmouseover = (e)=>e.target.classList.add('menu-activated');
			menubarTOP.onmouseout = (e)=>e.target.classList.remove('menu-activated');
			
			// mousemove Event
			const coords = document.getElementById('coords');
			const points = document.getElementById('points').firstElementChild; 
			
			outer.onmousemove = (e)=>{
				const rect= outer.getBoundingClientRect();
				const x = rect.x.toFixed();
				const y = rect.y.toFixed();
				coords.innerHTML = `X=${e.x},Y=${e.y}, Relative: (${e.x-x},${e.y-y})`;	
				
			};
			
			outer.onclick = (e)=>{
				const rect= outer.getBoundingClientRect();
				const x = rect.x.toFixed();
				const y = rect.y.toFixed();
				const point =  document.createElement('li');
				point.innerHTML=` (${e.x-x},${e.y-y})`;
				points.appendChild(point);
				
			}
			
			// key press events
			
			const login = document.getElementById('login');
			login.onkeyup = (e)=>{
				log(e);
				e.target.value = e.target.value.toUpperCase();
				
			}
			
			login.onkeydown = (e)=>{
				log(e);
				if ( !/\w/.test(e.key) ||  e.target.value.length==0 && /\d/.test(e.key)                        )e.preventDefault();
				

			}
			/*
			Grouping: ()
			Member access . or [...]
			Not: !
			Comparison, e.g. < , >= , === , !=, ...
			Logical AND &&
			Logical OR ||
			*/			
			
		
		</script>
	</body>
</html>